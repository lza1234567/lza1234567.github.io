import{d as M,r as m,au as S,y as T,av as g,$ as c,j as y,o as _,a as p,k as v,f as D,n as A,B as E,b as F,H as G,l as I,D as f,t as J,s as K}from"./index-aae22775.js";const L={class:"layui-textarea-wrapper"},P=["rows","cols","value","placeholder","name","disabled","readonly","maxlength"],Y={key:0,class:"layui-textarea-clear"},q={key:1,class:"layui-texterea-count"},Q=M({name:"LayTextarea",__name:"index",props:{modelValue:{},name:{},placeholder:{},disabled:{type:Boolean},showCount:{type:Boolean,default:!1},allowClear:{type:Boolean},cols:{},rows:{},maxlength:{},autosize:{type:[Boolean,Object],default:!1},readonly:{type:Boolean}},emits:["blur","input","update:modelValue","change","focus","clear"],setup(w,{expose:H,emit:b}){const l=w,s=b,n=m(),h=m(!1),z=S(),t=m({width:l.cols?"":"100%",height:l.rows?"":"auto",minHeight:l.rows?"":"100px",maxHeight:l.autosize?"":"auto",transition:"height 0.2s",...z}),x=function(e){const a=e.target;h.value||(s("update:modelValue",a.value),c(()=>s("input",a.value)))},i=e=>{const a=Number(n.value.style.lineHeight)||20;let o=a*e+8;return o+=o%a,o};T(()=>l.modelValue,(e,a)=>{if(g(l.autosize)){const o=(a??"").split(/\n/g).length>(e??"").split(/\n/g).length?"inc":"dec";let u=i((e==null?void 0:e.split(/\n/g).length)??0);if(n.value.clientHeight>u&&o=="dec"||n.value.clientHeight<u&&o=="inc")return;t.value.height=`${u}px`,c(()=>{var r;return n.value.scrollTo(0,((r=n.value)==null?void 0:r.scrollHeight)??0)})}});const C=function(e){s("focus",e)},V=function(e){s("blur",e)},B=e=>{const a=e.target;s("change",a.value)},$=function(){s("update:modelValue",""),s("clear")},k=()=>{h.value=!0},O=e=>{h.value=!1,x(e)},j=y(()=>{var e;return((e=l.modelValue)==null?void 0:e.length)>0}),N=y(()=>{var e;let a=String(((e=l.modelValue)==null?void 0:e.length)??0);return l.maxlength&&(a+="/"+l.maxlength),a}),R=()=>{var e;let a=Number((e=n.value)==null?void 0:e.style.height),o=0,u=0;if(g(l.autosize))if(Object.hasOwn(l.autosize,"maxHeight")){let{minHeight:r,maxHeight:d}=l.autosize;o=r,u=d}else{let{minRow:r,maxRow:d}=l.autosize;o=i(r),u=i(d)}a<o&&(a=o),a>u&&(a=u),c(()=>t.value.height=`${a}px`)};return _(()=>{if(g(l.autosize))if(Object.hasOwn(l.autosize,"maxHeight")){let{minHeight:e,maxHeight:a}=l.autosize;t.value.minHeight=`${e}px`,t.value.height=`${e}px`,t.value.maxHeight=`${a}px`}else{let{minRow:e,maxRow:a}=l.autosize;t.value.minHeight=`${i(e)}px`,t.value.height=`${i(e)}px`,t.value.maxHeight=`${i(a)}px`}l.rows&&(t.value.height=i(l.rows)+"px",t.value.maxHeight=i(l.rows)+"px")}),H({focus:()=>{c(()=>{var e;(e=n.value)==null||e.focus()})},blur:()=>{c(()=>{var e;(e=n.value)==null||e.blur()})}}),(e,a)=>(p(),v("div",L,[D("textarea",{ref_key:"textareaRef",ref:n,class:A(["layui-textarea",{"layui-textarea-disabled":e.disabled}]),rows:e.rows,cols:e.cols,value:e.modelValue,placeholder:e.placeholder,name:e.name,disabled:e.disabled,readonly:e.readonly,maxlength:e.maxlength,style:E(t.value),onCompositionstart:k,onCompositionend:O,onInput:x,onFocus:C,onChange:B,onBlur:V,onMouseenter:R,onMousedown:a[0]||(a[0]=()=>t.value.transition="none"),onMouseup:a[1]||(a[1]=()=>t.value.transition="height 0.2s")},null,46,P),e.allowClear&&j.value?(p(),v("span",Y,[F(G(I),{type:"layui-icon-close-fill",onClick:$})])):f("",!0),e.showCount?(p(),v("div",q,J(N.value),1)):f("",!0)]))}}),W=K(Q);export{W as a};
