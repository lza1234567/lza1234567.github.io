import{R as g,d as C,p as R,r as l,ag as h,j as t,o as j,a0 as E,a as s,k as i,B as M,H as m,D as q,c as w,l as A,m as D,n as H,s as L}from"./index-aae22775.js";const N=Symbol("layui-avatar"),O=()=>g(N,{}),P=["src","alt"],T=C({name:"LayAvatar",__name:"index",props:{src:{},size:{default:"md"},radius:{type:Boolean,default:!1},icon:{default:"layui-icon-username"},alt:{},autoFixSize:{type:Boolean,default:!0},fallback:{}},setup(y){const n=y,p=R(),c=l(null),o=l(null),v=l({}),u=l(),{size:k,radius:z,autoFixSize:x}=h(n),d=l(!1),S=t(()=>["layui-avatar",B.value?"layui-avatar-radius":"",f.value?`layui-avatar-${f.value}`:""]),e=O(),f=t(()=>(e==null?void 0:e.size)??k.value),B=t(()=>(e==null?void 0:e.radius)??z.value),b=t(()=>(e==null?void 0:e.autoFixSize)??x.value);j(()=>{b.value&&o.value&&(u.value=new ResizeObserver(a=>{for(const r of a)if(r.contentBoxSize){const F=c.value.offsetWidth,$=Math.min(F/r.contentBoxSize[0].inlineSize*.9,1);v.value={transform:`translate(-50%, -50%) scale(${$})`}}}),u.value.observe(o.value))});const _=a=>{n.fallback&&!d.value&&(a.target.src=n.fallback),d.value=!0};return E(()=>{var a;(a=u.value)==null||a.disconnect()}),(a,r)=>(s(),i("span",{ref_key:"avatar",ref:c,class:H(S.value)},[a.src?(s(),i("img",{key:0,src:a.src,alt:a.alt,onError:_},null,40,P)):(s(),i("span",{key:1,ref_key:"avatarText",ref:o,class:"layui-avatar-text",style:M(v.value)},[m(p).default?q("",!0):(s(),w(m(A),{key:0,type:a.icon},null,8,["type"])),D(a.$slots,"default")],4))],2))}}),V=L(T);export{V as a,N as o};
