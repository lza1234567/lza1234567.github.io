import{j as y,R as G,S as F,d as J,r as w,V as z,W as d,y as R,a as V,k as L,O as M,H as f,c as C,w as E,b as I,l as O,X as _,f as W,Y as Z,t as K,D as P,s as Q}from"./index-aae22775.js";function U(c){return{size:y(()=>{const m=G("LayForm",{});return c.size||m.size||"md"})}}const ee=100,ae=600,j={beforeMount(c,m){const t=m.value,{interval:h=ee,delay:p=ae}=F(t)?{}:t;let i,o;const s=()=>F(t)?t():t.handler(),r=()=>{o&&(clearTimeout(o),o=void 0),i&&(clearInterval(i),i=void 0)};c.addEventListener("mousedown",b=>{b.button===0&&(r(),s(),document.addEventListener("mouseup",()=>r(),{once:!0}),o=setTimeout(()=>{i=setInterval(()=>{s()},h)},p))})}},te=["position","size"],le={class:"layui-input-number-input"},ne={key:0,class:"layui-input-number-indicator"},ie=J({name:"LayInputNumber",__name:"index",props:{modelValue:{default:0},name:{},disabled:{type:Boolean,default:!1},disabledInput:{type:Boolean,default:!1},size:{},step:{default:1},stepStrictly:{type:Boolean,default:!1},precision:{},position:{},min:{default:-1/0},max:{default:1/0},indicator:{default:""}},emits:["update:modelValue","change","input","focus","blur"],setup(c,{emit:m}){const t=c,{size:h}=U(t),p=w(!0),i=m;let o=w(t.modelValue),s=w(null);const r=e=>{const{max:a,min:l,step:n,stepStrictly:x,precision:g}=t;if(l>a)throw new Error("input-number: props.max应大于props.min");let u=Number(e);return e==null||Number.isNaN(u)?null:(x&&(u=b(Math.round(u/n)*n,g)),z(g)||(u=b(u,g)),(u>a||u<l)&&(u=u>a?a:l,i("update:modelValue",u)),u)},b=(e,a)=>{if(a||(a=D.value),a===0)return Math.round(e);let l=String(e);const n=l.indexOf(".");if(n===-1||!l.replace(".","").split("")[n+a])return e;const x=l.length;return l.charAt(x-1)==="5"&&(l=`${l.slice(0,Math.max(0,x-1))}6`),Number.parseFloat(Number(l).toFixed(a))},B=e=>{if(!e)return 0;const a=e.toString(),l=a.indexOf(".");let n=0;return l!==-1&&(n=a.length-l-1),n},$=(e,a=1)=>d(e)?b(e+t.step*a):o.value,D=y(()=>{const e=B(t.step);return z(t.precision)?Math.max(B(t.modelValue),e):(e>t.precision&&console.warn("input-number: props.precision不应小于props.step的小数位"),t.precision)}),v=y(()=>{if(s.value!==null)return s.value;let e=o.value;if(e==null)return"";if(d(e)){if(Number.isNaN(e))return"";z(t.precision)||(e=e.toFixed(t.precision))}return e});R(()=>t.modelValue,e=>{const a=r(s.value),l=r(e);d(a)||a&&a===l||(o.value=l,s.value=null)},{immediate:!0});const N=(e,a=!0)=>{const l=o.value,n=r(e);a?l!==n&&(s.value=null,i("update:modelValue",n),i("change",n,l),o.value=n):i("update:modelValue",n)},A=e=>{s.value=e;const a=e===""?null:Number(e);N(a,!1)},H=e=>{const a=e===""?null:Number(e);(d(a)&&!Number.isNaN(a)||e==="")&&N(a),s.value=null},T=e=>{i("blur",e),p.value=!0},X=e=>{i("focus",e),p.value=!1},Y=()=>{if(t.disabledInput||k.value)return;const e=Number(v.value)||0,a=$(e);N(a)},q=()=>{if(t.disabledInput||S.value)return;const e=Number(v.value)||0,a=$(e,-1);N(a)},S=y(()=>!!t.disabled||t.min!==-1/0&&d(t.modelValue)&&Number(t.min)>=t.modelValue),k=y(()=>!!t.disabled||t.max!==1/0&&d(t.modelValue)&&Number(t.max)<=t.modelValue);return(e,a)=>(V(),L("div",{class:"layui-input-number",position:e.position,size:f(h)},[M((V(),C(_,{size:"lg",disabled:S.value,class:"layui-control-btn layui-subtraction-btn"},{default:E(()=>[I(f(O),{type:e.position==="right"?"layui-icon-down":"layui-icon-subtraction"},null,8,["type"])]),_:1},8,["disabled"])),[[f(j),q]]),W("div",le,[I(Z,{title:`${v.value}${e.indicator}`,max:e.max,min:e.min,name:e.name,modelValue:v.value,readonly:e.disabledInput||e.disabled,disabled:e.disabledInput||e.disabled,onInput:A,onChange:H,onBlur:T,onFocus:X,type:"number"},null,8,["title","max","min","name","modelValue","readonly","disabled"]),p.value&&e.indicator?(V(),L("div",ne,K(`${v.value}${e.indicator}`),1)):P("",!0)]),M((V(),C(_,{size:"lg",disabled:k.value,class:"layui-control-btn layui-addition-btn"},{default:E(()=>[I(f(O),{type:e.position==="right"?"layui-icon-up":"layui-icon-addition"},null,8,["type"])]),_:1},8,["disabled"])),[[f(j),Y]])],8,te))}}),oe=Q(ie);export{oe as a};
