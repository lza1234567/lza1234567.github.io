import{j as y,R as ee,d as le,p as ae,r as o,A as te,y as A,ak as ue,a5 as de,a as E,k as G,b as n,w as s,f as T,ab as M,al as ie,E as oe,H as h,ac as ne,c as P,am as se,an as H,a2 as O,l as Y,n as N,Y as re,aa as ce,ae as pe,ao as fe,s as ve,_ as me,e as q}from"./index-aae22775.js";import{a as he}from"./index-3844a8f5.js";import{a as ye}from"./index-5b5bb947.js";import{e as Fe,S as _e}from"./index2-b7c8ef1d.js";import"./index2-08f7c804.js";function we(c){return{size:y(()=>{const t=ee("LayForm",{});return c.size||t.size||"md"})}}const ge={class:"layui-tree-select-content"},Ce=le({name:"LayTreeSelect",__name:"index",props:{modelValue:{},data:{},size:{},multiple:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{},checkStrictly:{type:Boolean,default:!0},collapseTagsTooltip:{type:Boolean,default:!0},minCollapsedNum:{default:3},search:{type:Boolean,default:!1},searchNodeMethod:{type:Function,default:(c,t)=>c.title.includes(t)},lazy:{type:Boolean},load:{},contentClass:{},contentStyle:{type:[Boolean,null,String,Object,Array]},replaceFields:{},defaultExpandAll:{type:Boolean,default:void 0},teleportProps:{},tailNodeIcon:{},cacheData:{}},emits:["update:modelValue","change","search"],setup(c,{emit:t}){const a=c,u=t,b=ae(),{size:V}=we(a),r=y(()=>Object.assign({},Fe,a.replaceFields)),p=o(""),C=o(""),f=o([]),F=o(!1),B=o(),k=o(!1),g=o(),J=y(()=>{const e=[],l=d=>{d.forEach(i=>{e.push(i);const w=i[r.value.children];pe(w)&&l(w)})};return l(te(a.data)?a.data:[a.data]),[...e,...a.cacheData||[]]});function x(e){var l;const{id:d}=r.value;return g.value?(l=g.value.getFlatTree().value.find(i=>i.id===e))==null?void 0:l.original:J.value.find(i=>i[d]===e)}const _=o(!1),v=y({get:()=>a.multiple?"":a.modelValue,set(e){a.multiple||a.modelValue===e||(u("update:modelValue",e),_.value&&u("change",e)),_.value||(_.value=!0)}}),m=y({get:()=>a.multiple?a.modelValue:[],set(e){a.multiple&&(u("update:modelValue",e),_.value&&u("change",e)),_.value||(_.value=!0)}});function D(){a.multiple?u("update:modelValue",[]):u("update:modelValue","")}function Q(){a.multiple||B.value.hide()}function W(e){if(B.value.hide(),a.checkStrictly)u("update:modelValue",m.value.filter(l=>l!==e));else{const l=function(d){const i=[],{id:w,children:R}=r.value;function j(S,L){L.push(S[w]),S[R]&&S[R].forEach($=>{j($,L)})}return j(d,i),i}(x(e));u("update:modelValue",m.value.filter(d=>!l.includes(d)))}}A(()=>[v.value,m.value,a.data],()=>{if(a.multiple)try{f.value=m.value.map(e=>{let l=x(e);return l=l?{label:l.title||l[r.value.title],value:l.id,closable:!l.disabled}:{label:e,value:e,closable:!0},l})}catch{throw new Error("v-model / model-value is not an array type")}else{const e=x(v.value);C.value=e?String(e.title||e[r.value.title]):""}},{immediate:!0,deep:!0});const I=y(()=>a.multiple?m.value.length>0:Array.isArray(v.value)?v.value.length:v.value),K=y(()=>I.value?"":a.placeholder);function z(e){k.value||(u("search",e),p.value=e)}function X(){k.value=!0}function Z(e){k.value=!1,z(e.target.value)}A(p,ue(()=>{g.value&&g.value.filter(p.value)},500)),A(F,()=>{F.value||(p.value="")});const U=o(null);return de(fe,{inputEl:U,setInputEl:function(e){a.search&&(U.value=e)}}),(e,l)=>(E(),G("div",{class:N(["layui-tree-select",{"layui-disabled":e.disabled,"has-content":I.value,"has-clear":e.allowClear}])},[n(ce,{ref_key:"dropdownRef",ref:B,disabled:e.disabled,"content-class":e.contentClass,"content-style":e.contentStyle,"teleport-props":e.teleportProps,"click-to-close":!1,onShow:l[5]||(l[5]=d=>F.value=!0),onHide:l[6]||(l[6]=d=>F.value=!1)},{content:s(()=>[T("div",ge,[n(_e,M({ref_key:"treeRef",ref:g},a,{"selected-key":v.value,"onUpdate:selectedKey":l[3]||(l[3]=d=>v.value=d),"checked-keys":m.value,"onUpdate:checkedKeys":l[4]||(l[4]=d=>m.value=d),"only-icon-control":!0,"show-checkbox":e.multiple,"replace-fields":r.value,onNodeClick:Q}),ie({_:2},[oe(h(b),(d,i)=>({name:i,fn:s(w=>[n(h(ne),M({slots:h(b),render:i},w),null,16,["slots","render"])])}))]),1040,["selected-key","checked-keys","show-checkbox","replace-fields"])])]),default:s(()=>[e.multiple?(E(),P(se,{key:0,modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=d=>f.value=d),size:h(V),"allow-clear":e.allowClear,placeholder:K.value,"collapse-tags-tooltip":e.collapseTagsTooltip,"min-collapsed-num":e.minCollapsedNum,"disabled-input":!e.search,"input-value":p.value,onInputValueChange:z,onRemove:W,onClear:D,onKeyupCapture:l[1]||(l[1]=H(O(()=>{},["prevent","stop"]),["delete"])),onKeydownCapture:l[2]||(l[2]=H(O(()=>{},["prevent","stop"]),["enter"]))},{suffix:s(()=>[n(h(Y),{type:"layui-icon-triangle-d",class:N({triangle:F.value})},null,8,["class"])]),_:1},8,["modelValue","size","allow-clear","placeholder","collapse-tags-tooltip","min-collapsed-num","disabled-input","input-value"])):(E(),P(re,{key:1,"model-value":C.value,"allow-clear":e.allowClear,placeholder:K.value,disabled:e.disabled,readonly:!e.search,size:h(V),onClear:D,onInput:z,onCompositionstart:X,onCompositionend:Z},{suffix:s(()=>[n(h(Y),{type:"layui-icon-triangle-d",class:N({triangle:F.value})},null,8,["class"])]),_:1},8,["model-value","allow-clear","placeholder","disabled","readonly","size"]))]),_:1},8,["disabled","content-class","content-style","teleport-props"])],2))}}),Ee=ve(Ce);const be={setup(){const c=o(23),t=o([23]),a=o([{title:"一级1",id:1,field:"name1",children:[{title:"二级1-1 可允许跳转",id:3,field:"name11",href:"https://www.layui.com/",children:[{title:"三级1-1-3",id:23,field:"",children:[{title:"四级1-1-3-1",id:24,field:"",children:[{title:"五级1-1-3-1-1",id:30},{title:"五级1-1-3-1-2",id:31}]}]},{title:"三级1-1-1",id:7,field:"",children:[{title:"四级1-1-1-1 可允许跳转",id:15,href:"https://www.layui.com/doc/"}]},{title:"三级1-1-2",id:8,field:"",children:[{title:"四级1-1-2-1",id:32}]}]},{title:"二级1-2",id:4,spread:!0,children:[{title:"三级1-2-1",id:9},{title:"三级1-2-2",id:10}]},{title:"二级1-3",id:20,field:"",children:[{title:"三级1-3-1",id:21,field:""},{title:"三级1-3-2",id:22,field:""}]}]},{title:"一级2",id:2,children:[{title:"二级2-1",id:5,spread:!0,children:[{title:"三级2-1-1",id:11},{title:"三级2-1-2",id:12}]},{title:"二级2-2",id:6,children:[{title:"三级2-2-1",id:13},{title:"三级2-2-2",id:14}]}]},{title:"一级3",id:16,field:"",children:[{title:"二级3-1",id:17,field:"",fixed:!0,children:[{title:"三级3-1-1",id:18,field:""},{title:"三级3-1-2",id:19,field:""}]},{title:"二级3-2",id:27,field:"",children:[{title:"三级3-2-1",id:28,field:""},{title:"三级3-2-2",id:29,field:""}]}]}]);return{value1:c,value2:t,data:a}}};function Ve(c,t,a,u,b,V){const r=he,p=Ee,C=ye;return E(),G("div",null,[n(r,null,{default:s(()=>[...t[2]||(t[2]=[T("p",{class:"header-title"},"下拉树",-1),T("p",{class:"header-describe"},"二维条码 / 二维码（2-dimensional bar code）是用某种特定的几何图形按一定规律在平面（二维方向上）分布的、黑白相间的、记录数据符号信息的图形.",-1)])]),_:1}),n(C,{fluid:!0,style:{padding:"10px","padding-top":"0px"}},{default:s(()=>[n(r,null,{title:s(()=>[...t[3]||(t[3]=[q("基础案例",-1)])]),default:s(()=>[n(p,{modelValue:u.value1,"onUpdate:modelValue":t[0]||(t[0]=f=>u.value1=f),data:u.data},null,8,["modelValue","data"])]),_:1}),n(r,null,{title:s(()=>[...t[4]||(t[4]=[q("进阶使用",-1)])]),default:s(()=>[n(p,{modelValue:u.value2,"onUpdate:modelValue":t[1]||(t[1]=f=>u.value2=f),data:u.data,multiple:""},null,8,["modelValue","data"])]),_:1})]),_:1})])}const Ae=me(be,[["render",Ve],["__scopeId","data-v-4ddd3dad"]]);export{Ae as default};
